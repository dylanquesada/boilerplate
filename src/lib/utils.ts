import { type ClassValue, clsx } from 'clsx';
import { twMerge } from 'tailwind-merge';

export function cn(...inputs: ClassValue[]) {
  return twMerge(clsx(inputs));
}

export function formatDate(date: Date): string {
  // Check if the date is valid
  if (!date || isNaN(date.getTime())) {
    return 'Invalid date';
  }
  
  return new Intl.DateTimeFormat('en-US', {
    year: 'numeric',
    month: 'long',
    day: 'numeric',
  }).format(date);
}

export function safeParseDate(dateValue: unknown): Date {
  if (!dateValue) return new Date();
  if (dateValue instanceof Date) return dateValue;
  
  const parsed = new Date(String(dateValue));
  return isNaN(parsed.getTime()) ? new Date() : parsed;
}

export function truncateText(text: string, maxLength: number): string {
  if (text.length <= maxLength) return text;
  return text.substring(0, maxLength).trim() + '...';
} 